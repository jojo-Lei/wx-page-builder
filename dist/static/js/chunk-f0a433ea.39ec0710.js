(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f0a433ea"],{"5ff9":function(t,e,o){},a7fb:function(t,e,o){"use strict";o.r(e);var r,n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"page-login"},[t._m(0),o("div",{staticClass:"login-page-inner"},[o("p",{staticClass:"title"},[t._v("微信页面编辑工具")]),o("el-form",{ref:"loginForm",attrs:{model:t.formData,"status-icon":"",rules:"注册"===t.type?t.formRulesRegister:t.formRules,"label-width":"80px"}},["注册"===t.type?o("el-form-item",{attrs:{prop:"email",label:"邮箱"}},[o("el-input",{nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.doLogin(e)}},model:{value:t.formData.email,callback:function(e){t.$set(t.formData,"email",e)},expression:"formData.email"}}),o("span",{staticClass:"iconfont icon-zhanghao",attrs:{slot:"prefix"},slot:"prefix"})],1):t._e(),o("el-form-item",{attrs:{label:"用户名",prop:"username"}},[o("el-input",{nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.doLogin(e)}},model:{value:t.formData.username,callback:function(e){t.$set(t.formData,"username",e)},expression:"formData.username"}}),o("i",{staticClass:"iconfont icon-zhanghao",attrs:{slot:"prefix"},slot:"prefix"})],1),o("el-form-item",{attrs:{label:"密码",prop:"password"}},["password"===t.inputType?o("el-input",{attrs:{type:t.inputType,autocomplete:"off"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.doLogin(e)}},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}},[o("i",{staticClass:"iconfont icon-mima",attrs:{slot:"prefix"},slot:"prefix"}),o("span",{staticClass:"cursor-pointer",attrs:{slot:"suffix"},on:{mousedown:t.mousedownPassword},slot:"suffix"},[o("i",{staticClass:"iconfont icon-yincangmima"})])]):o("el-input",{attrs:{type:t.inputType},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.doLogin(e)}},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}},[o("i",{staticClass:"iconfont icon-mima",attrs:{slot:"prefix"},slot:"prefix"}),o("span",{staticClass:"cursor-pointer",attrs:{slot:"suffix"},on:{mousedown:t.mousedownText},slot:"suffix"},[o("i",{staticClass:"iconfont icon-yincangmima"})])])],1),"注册"===t.type?o("el-form-item",{attrs:{prop:"checkPassword",label:"确认密码"}},[o("el-input",{nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.doLogin(e)}},model:{value:t.formData.checkPassword,callback:function(e){t.$set(t.formData,"checkPassword",e)},expression:"formData.checkPassword"}},[o("span",{staticClass:"iconfont icon-zhanghao",attrs:{slot:"prefix"},slot:"prefix"})])],1):t._e(),o("el-form-item",[o("div",{staticClass:"btn-hover",on:{click:t.doLogin}},[t._v(t._s("注册"===t.type?"注册":"登录"))]),o("div",{staticClass:"clearfix text-right paddingT10"},[o("el-button",{attrs:{type:"text"},on:{click:t.switchLoginType}},[t._v(t._s("注册"===t.type?"立马登录":"立马注册"))])],1)])],1)],1)])},a=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"login-logo"},[o("i",{staticClass:"iconfont icon-xinxiwanglogo"})])}],s=o("b081"),i=(o("cc57"),o("2ca7")),u={components:(r={},Object(s["a"])(r,i["Form"].name,i["Form"]),Object(s["a"])(r,i["FormItem"].name,i["FormItem"]),Object(s["a"])(r,i["Input"].name,i["Input"]),r),data:function(){var t=this,e=function(t,e,o){if(!e)return o(new Error("用户名不能为空"));o()},o=function(e,o,r){""===o?r(new Error("请输入密码")):(""!==t.formData.checkpassword&&t.$refs.formData.validateField("checkpassword"),r())},r=function(e,o,r){""===o?r(new Error("请再次输入密码")):o!==t.formData.password?r(new Error("两次输入密码不一致!")):r()};return{loading:!1,type:"login",inputType:"password",formData:{email:"",username:"",password:"",checkpassword:""},formRules:{username:[{required:!0,validator:e,trigger:"blur"}],password:[{required:!0,validator:o,trigger:"blur"}],checkpassword:[{required:!0,validator:r,trigger:"blur"}]},formRulesRegister:{username:[{required:!0,validator:e,trigger:"blur"}],password:[{required:!0,validator:o,trigger:"blur"}],chackpassword:[{required:!0,validator:r,trigger:"blur"}]}}},created:function(){},methods:{doLogin:function(){var t=this;"注册"!==this.type?this.$refs.loginForm.validate((function(e){if(!e)return t.$message.error("请正确填下表单!"),!1;t.$axios.post("/auth/login",t.formData).then((function(e){t.$store.dispatch("updateUserToken",e.body.token),t.$router.push("/"),t.getUserInfo()}))})):this.doRegister()},doRegister:function(){var t=this;this.$refs.loginForm.validate((function(e){if(!e)return t.$message.error("请正确填下表单!"),!1;t.$axios.post("/auth/register",t.formData).then((function(e){t.$store.dispatch("updateUserToken",e.body.token),t.$router.push("/"),t.getUserInfo()}))}))},mousedownPassword:function(){this.inputType="text"},mousedownText:function(){this.inputType="password"},mouseup:function(){this.inputType="password"},getUserInfo:function(){var t=this;this.$axios.get("/user/info").then((function(e){t.$store.dispatch("updateUserInfo",e.body)}))},switchLoginType:function(){this.type="登录"===this.type?"注册":"登录"}}},c=u,l=(o("b9bf"),o("e90a")),f=Object(l["a"])(c,n,a,!1,null,"09b2d8de",null);e["default"]=f.exports},b9bf:function(t,e,o){"use strict";var r=o("5ff9"),n=o.n(r);n.a},cc57:function(t,e,o){var r=o("064e").f,n=Function.prototype,a=/^\s*function ([^ (]*)/,s="name";s in n||o("149f")&&r(n,s,{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(t){return""}}})}}]);